<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://fonts.googleapis.com/css2?family=Mitr&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="CSS/Map.css">
</head>
<body>
  <div class="container"> 
    <div class="iconCon">
      <div class="iconCol">
        <div class="backWard" onclick="backPage()">
          <img src="IMG/right-arrow.png" alt="" style="width: 70%; height: 80%;">
        </div>
      </div>
      <div class="iconCol">
        <div class="cometConUp" onclick="toHome(1)">
            <img src="IMG/comet.png" alt="" class="comet" id="comet1">
            <img src="IMG/explosion.png" alt="" class="explosion none" id="explosion1" style="border: 1px solid black;">
          <div class="numState">
            1
          </div>
        </div>
        <div class="titleStateUp">
          HTML
        </div>
      </div>
      <div class="iconCol">
        <div class="cometConDown" onclick="toHome(2)">
            <img src="IMG/comet.png" alt="" class="comet" id="comet2">
            <img src="IMG/explosion.png" alt="" class="explosion none" id="explosion2">
          <div class="numState">
            2
          </div>
        </div>
        <div class="titleStateDown">
          CSS
        </div>
      </div>
      <div class="iconCol">
        <div class="cometConUp" onclick="toHome(3)">
          <img src="IMG/comet.png" alt="" class="comet" id="comet3">
          <img src="IMG/explosion.png" alt="" class="explosion none" id="explosion3">
        <div class="numState">
          3
        </div>
      </div>
      <div class="titleStateUp">
        Javascript
      </div>
      </div>
      <div class="iconCol">
        <div class="cometConDown" onclick="toHome(4)">
          <img src="IMG/comet.png" alt="" class="comet" id="comet4">
          <img src="IMG/explosion.png" alt="" class="explosion none" id="explosion4">
        <div class="numState">
          4
        </div>
        </div>
        <div class="titleStateDown">
          PHP
        </div>
      </div>
      <div class="iconCol">
        <div class="cometConUp" onclick="toHome(5)">
          <img src="IMG/comet.png" alt="" class="comet" id="comet5">
          <img src="IMG/explosion.png" alt="" class="explosion none" id="explosion5">
        <div class="numState">
          5
        </div>
      </div>
      <div class="titleStateUp">
        Python
      </div>
      </div>
      <div class="iconCol">
      </div>
    </div>
    <div class="cannonCon">
      <div class="disCon" id="display"> โจมตีอุกกาบาต</div>
      <div class="canIcon">
        <img src="IMG/cannon.png" alt="" class="lockCan" id='theLockC' onclick="canLock()">
        <img src="IMG/2762427-removebg-preview.png" alt="" class="unCan none" id="unlockCan" onclick="toAnot()">
      </div>
    </div>
  </div>
  <script>
    const startState =    JSON.parse(localStorage.getItem('activeState')) ||  {
      state1: 'unActive',
      state2: 'unActive',
      state3: 'unActive',
      state4: 'unActive',
      state5: 'unActive',
    };
    
    for(let i=1;i<=5;i++){
      if(startState['state'+i] === 'Active'){
        const icomet = document.getElementById('comet'+i);
        const iexp = document.getElementById('explosion'+i);

        icomet.classList.add('none');
        iexp.classList.remove('none');
      }
    }
    
    if(areAllActive()){
      const dis = document.getElementById('display');
      const lock = document.getElementById('theLockC');
      const un = document.getElementById('unlockCan');

      dis.innerHTML = ' ภารกิจเสร็จสิ้น'
      lock.classList.add('none');
      un.classList.remove('none');
    }

    console.log(startState)

    function closeAd(number){
      const cAd = 'ad'+number;
      const tAd = document.getElementById(cAd);
      tAd.remove();
    }

    function linkTo(number){
      startState['state'+number] = 'Active'
      localStorage.setItem('activeState',JSON.stringify(startState))
    }
    
    
    function toHome(number){
      linkTo(number);
      window.location.href = 'Home'+number+'.html';
    }

    function areAllActive() {
      for (let i = 1; i <= 5; i++) {
        if (startState['state' + i] !== 'Active') {
          return false;
        }
      }
      return true;
    }

    function canLock(){
      const dis = document.getElementById('display');
      dis.innerHTML = 'ภารกิจยังไม่เสร็จสิ้น'
    }

    function toAnot(){
      window.location.href = 'cong.html';
    }

    function backPage(){
       window.location.href = 'info.html';
    }

  </script>
</body>
</html>